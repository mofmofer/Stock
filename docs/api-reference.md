# API リファレンス

REST API の主要エンドポイントと挙動をまとめています。すべての POST エンドポイントは JSON ペイロードを受け取り、検証エラーやビジネスルール違反時には HTTP 400、対象リソースが存在しない場合は HTTP 404 を返します。

| メソッド | エンドポイント | 説明 |
| --- | --- | --- |
| POST | `/api/accounts` | 新しいアカウントを作成します。初期入金額を指定できます。 |
| GET | `/api/accounts/{id}` | 指定アカウントの現金残高と保有銘柄を取得します。 |
| POST | `/api/accounts/{id}/deposit` | 指定アカウントに米ドルを入金します。 |
| POST | `/api/accounts/{id}/withdraw` | 指定アカウントから米ドルを出金します。 |
| POST | `/api/accounts/{id}/trade` | 買いまたは売りの取引を実行し、平均取得単価を更新します。 |
| GET | `/api/accounts/{id}/transactions` | 入出金および売買トランザクション履歴を取得します。 |

## 使用例
- 取引アカウントを作成した後、`/deposit` で初期資金を追加し、`/trade` で銘柄の売買を行います。
- `/transactions` を参照して履歴を確認し、レポート用途に活用します。

## エラーハンドリング
- **400 Bad Request**: リクエストパラメータが不正、またはビジネスルールに違反しています。
- **404 Not Found**: 指定されたアカウントが存在しません。
- **500 Internal Server Error**: サーバー側で予期しないエラーが発生しました。ログを確認してください。

